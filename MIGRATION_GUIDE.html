<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIBCO to Spring Boot Migration Guide</title>
    <style>
        @page {
            margin: 2cm;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #fff;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            page-break-before: always;
        }
        h1:first-of-type {
            page-break-before: avoid;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 10px;
        }
        h3 {
            color: #555;
            margin-top: 20px;
        }
        pre {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-left: 3px solid #3498db;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        .diagram {
            background: #f9f9f9;
            border: 2px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            white-space: pre;
            overflow-x: auto;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .feature-box {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
        }
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
        }
        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            margin: 20px 0;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc li {
            padding: 5px 0;
        }
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        @media print {
            body {
                background: white;
            }
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>

<h1>TIBCO BusinessWorks to Spring Boot Migration Guide</h1>

<div class="toc">
    <h2>Table of Contents</h2>
    <ul>
        <li><a href="#overview">1. Overview</a></li>
        <li><a href="#architecture">2. Architecture</a></li>
        <li><a href="#components">3. Component Details</a></li>
        <li><a href="#setup">4. Setup Instructions</a></li>
        <li><a href="#usage">5. Usage Examples</a></li>
        <li><a href="#flows">6. Flow Diagrams</a></li>
        <li><a href="#sequences">7. Sequence Diagrams</a></li>
        <li><a href="#outputs">8. Generated Outputs</a></li>
        <li><a href="#troubleshooting">9. Troubleshooting</a></li>
                <li><a href="#ai-enablement">10. Enabling AI-Powered Code Generation</a></li>
        <li><a href="#hexagonal">11. Hexagonal Architecture Support</a></li>
    </ol>
    </ul>
</div>

<h1 id="overview">1. Overview</h1>

<div class="feature-box">
    <h3>Project Summary</h3>
    <p>This project provides an <strong>automated migration framework</strong> to convert TIBCO BusinessWorks (BW) process definitions into modern Spring Boot microservices (REST and SOAP).</p>
</div>

<h2>Key Features</h2>
<ul>
    <li>âœ… Multi-agent AI architecture for intelligent code generation</li>
    <li>âœ… Parallel processing support for multiple BW processes</li>
    <li>âœ… Generates both REST and SOAP Spring Boot services</li>
    <li>âœ… Complete Spring Boot project structure with Maven configuration</li>
    <li>âœ… JAXB/XSD integration for type safety</li>
    <li>âœ… JPA/Hibernate for database operations</li>
    <li>âœ… JMS messaging support</li>
    <li>âœ… Automated packaging and archiving</li>
</ul>

<h2>Technology Stack</h2>

<table>
    <tr>
        <th>Category</th>
        <th>Technology</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Input Format</td>
        <td>TIBCO BusinessWorks</td>
        <td>.process, .xsd, .bwp files</td>
    </tr>
    <tr>
        <td>Framework</td>
        <td>Spring Boot</td>
        <td>3.2.0</td>
    </tr>
    <tr>
        <td>Language</td>
        <td>Java</td>
        <td>17</td>
    </tr>
    <tr>
        <td>REST</td>
        <td>Spring Web</td>
        <td>Included in Spring Boot</td>
    </tr>
    <tr>
        <td>SOAP</td>
        <td>Spring Web Services</td>
        <td>Included in Spring Boot</td>
    </tr>
    <tr>
        <td>Database</td>
        <td>Spring Data JPA</td>
        <td>H2 / Oracle</td>
    </tr>
    <tr>
        <td>Messaging</td>
        <td>Spring JMS</td>
        <td>Apache Artemis</td>
    </tr>
    <tr>
        <td>XML Binding</td>
        <td>JAXB</td>
        <td>Jakarta XML Binding</td>
    </tr>
</table>

<h1 id="architecture">2. Architecture</h1>

<h2>High-Level System Architecture</h2>

<div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TIBCO BW Migration System                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         LeaderAgent (Orchestrator)        â”‚
        â”‚  â€¢ Discovers BW process folders          â”‚
        â”‚  â€¢ Builds shared knowledge base (RAG)    â”‚
        â”‚  â€¢ Creates ProcessAgents                 â”‚
        â”‚  â€¢ Manages parallel execution            â”‚
        â”‚  â€¢ Generates reports & archives          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
                â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ProcessAgent      â”‚       â”‚   ProcessAgent      â”‚
    â”‚   (Process 1)       â”‚       â”‚   (Process 2)       â”‚
    â”‚                     â”‚       â”‚                     â”‚
    â”‚ â€¢ Parse .process    â”‚       â”‚ â€¢ Parse .process    â”‚
    â”‚ â€¢ Extract XSDs      â”‚       â”‚ â€¢ Extract XSDs      â”‚
    â”‚ â€¢ Detect service    â”‚       â”‚ â€¢ Detect service    â”‚
    â”‚   types             â”‚       â”‚   types             â”‚
    â”‚ â€¢ Coordinate agents â”‚       â”‚ â€¢ Coordinate agents â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â–¼               â–¼             â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚RestService   â”‚ â”‚SoapService   â”‚ â”‚RestService   â”‚ â”‚SoapService   â”‚
â”‚Agent         â”‚ â”‚Agent         â”‚ â”‚Agent         â”‚ â”‚Agent         â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚â€¢ REST API    â”‚ â”‚â€¢ SOAP/WSDL   â”‚ â”‚â€¢ REST API    â”‚ â”‚â€¢ SOAP/WSDL   â”‚
â”‚â€¢ Controller  â”‚ â”‚â€¢ Endpoint    â”‚ â”‚â€¢ Controller  â”‚ â”‚â€¢ Endpoint    â”‚
â”‚â€¢ DTOs        â”‚ â”‚â€¢ JAXB DTOs   â”‚ â”‚â€¢ DTOs        â”‚ â”‚â€¢ JAXB DTOs   â”‚
â”‚â€¢ Service     â”‚ â”‚â€¢ Config      â”‚ â”‚â€¢ Service     â”‚ â”‚â€¢ Config      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div>

<h1 id="components">3. Component Details</h1>

<h2>3.1 LeaderAgent</h2>
<div class="feature-box">
    <p><strong>Purpose:</strong> Orchestrates the entire migration process</p>
    <p><strong>Location:</strong> <code>generator/ai/leader.py</code></p>
</div>

<h3>Key Responsibilities</h3>
<ul>
    <li>Scan input directory for BW process folders</li>
    <li>Build shared RAG (Retrieval-Augmented Generation) knowledge base</li>
    <li>Create and manage ProcessAgents for each BW folder</li>
    <li>Execute parallel or sequential processing</li>
    <li>Generate migration reports and ZIP archives</li>
</ul>

<h3>Configuration Example</h3>
<pre><code>leader = LeaderAgent(
    input_base='input_artifacts',      # BW process folder
    output_base='output',               # Generated code output
    package_root='com.example.tibco',  # Java package
    parallel=True,                      # Enable parallel processing
    max_workers=4                       # Thread pool size
)</code></pre>

<h2>3.2 ProcessAgent</h2>
<div class="feature-box">
    <p><strong>Purpose:</strong> Analyzes individual BW process and coordinates service generation</p>
    <p><strong>Location:</strong> <code>generator/ai/process_agent.py</code></p>
</div>

<h3>Key Responsibilities</h3>
<ol>
    <li>Parse <code>.process</code> files using process_parser</li>
    <li>Extract activities (JDBC, JMS, HTTP, SOAP)</li>
    <li>Identify XSD schemas</li>
    <li>Determine service type (REST vs SOAP)</li>
    <li>Generate shared artifacts (Entities, Repositories, Services, DTOs)</li>
</ol>

<h2>3.3 RestServiceAgent</h2>
<div class="feature-box">
    <p><strong>Purpose:</strong> Generates Spring Boot REST API implementation</p>
</div>

<h3>Generated Files</h3>
<ul>
    <li><code>pom.xml</code> - Maven with Spring Web dependencies</li>
    <li><code>*Controller.java</code> - @RestController with endpoints</li>
    <li><code>*Service.java</code> - @Service with business logic</li>
    <li><code>*Repository.java</code> - JpaRepository interface</li>
    <li><code>*Entity.java</code> - JPA Entity classes</li>
    <li><code>*Request.java / *Response.java</code> - DTOs</li>
    <li><code>application.yml</code> - Spring Boot configuration</li>
</ul>

<h2>3.4 SoapServiceAgent</h2>
<div class="feature-box">
    <p><strong>Purpose:</strong> Generates Spring Boot SOAP Web Service (Spring-WS)</p>
</div>

<h3>Generated Files</h3>
<ul>
    <li><code>SoapServiceApplication.java</code> - @SpringBootApplication</li>
    <li><code>WebServiceConfig.java</code> - WSDL/XSD configuration</li>
    <li><code>*Endpoint.java</code> - @Endpoint with @PayloadRoot</li>
    <li>JAXB-annotated DTOs with @XmlRootElement</li>
    <li><code>pom.xml</code> - Maven with Spring-WS dependencies</li>
    <li>Unified XSD schema files</li>
</ul>

<h1 id="setup">4. Setup Instructions</h1>

<h2>4.1 Prerequisites</h2>

<div class="warning-box">
    <h3>Required Software</h3>
    <ul>
        <li>Python 3.8 or higher</li>
        <li>Java 17 or higher (JDK)</li>
        <li>Maven 3.6+ (optional, for building generated projects)</li>
    </ul>
</div>

<h2>4.2 Installation Steps</h2>

<h3>Step 1: Navigate to Project Directory</h3>
<pre><code>cd c:\IBM\DBS-TIBCO-SPRINGBOOT\PY29OCT\tibco_migration</code></pre>

<h3>Step 2: Set Up Python Virtual Environment</h3>
<pre><code># Create virtual environment
python -m venv .venv

# Activate virtual environment (Windows PowerShell)
.venv\Scripts\activate

# Install dependencies (if requirements.txt exists)
pip install -r requirements.txt</code></pre>

<h3>Step 3: Verify Directory Structure</h3>
<pre><code>tibco_migration/
â”œâ”€â”€ generator/
â”‚   â”œâ”€â”€ generator/
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”œâ”€â”€ leader.py
â”‚   â”‚   â”‚   â”œâ”€â”€ process_agent.py
â”‚   â”‚   â”‚   â”œâ”€â”€ service_agents.py
â”‚   â”‚   â”‚   â””â”€â”€ run.py
â”‚   â”‚   â””â”€â”€ process_parser.py
â”‚   â”œâ”€â”€ input_artifacts/
â”‚   â””â”€â”€ output/
â””â”€â”€ MIGRATION_GUIDE.md</code></pre>

<h1 id="usage">5. Usage Examples</h1>

<h2>5.1 Basic Migration</h2>

<h3>Input Structure</h3>
<pre><code>input_artifacts/
â””â”€â”€ LoanApp/
    â”œâ”€â”€ LoanApplication.process
    â”œâ”€â”€ loan_request.xsd
    â””â”€â”€ loan_response.xsd</code></pre>

<h3>Run Migration</h3>
<pre><code>cd generator
python -m generator.ai.run --input-dir input_artifacts --output-dir output</code></pre>

<h3>Expected Output</h3>
<pre><code>output/
â”œâ”€â”€ rest/                    # Spring Boot REST project
â”œâ”€â”€ soap/                    # Spring Boot SOAP project
â”œâ”€â”€ src_rest.zip            # REST source archive
â”œâ”€â”€ src_soap.zip            # SOAP source archive
â””â”€â”€ ai_migration_report.json</code></pre>

<h2>5.2 Testing REST Service</h2>

<h3>Build and Run</h3>
<pre><code>cd output\rest
mvn clean package
mvn spring-boot:run</code></pre>

<h3>Sample REST Request</h3>
<pre><code>curl -X POST http://localhost:8080/loan/apply \
  -H "Content-Type: application/json" \
  -d '{
    "customerID": "CUST001",
    "loanAmount": 50000,
    "loanType": "Personal",
    "loanTermMonths": 36,
    "applicantName": "John Doe",
    "contactEmail": "john.doe@example.com"
  }'</code></pre>

<h3>Expected Response</h3>
<pre><code>{
  "loanID": "550e8400-e29b-41d4-a716-446655440000",
  "status": "APPROVED",
  "message": "Loan application approved",
  "approvedAmount": 50000
}</code></pre>

<h2>5.3 Testing SOAP Service</h2>

<h3>Build and Run</h3>
<pre><code>cd output\soap
mvn clean package
mvn spring-boot:run</code></pre>

<h3>Access WSDL</h3>
<pre><code>http://localhost:8081/ws/loanApplication.wsdl</code></pre>

<h3>Sample SOAP Request</h3>
<pre><code>&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:loan="http://example.com/tibco_migration/loan"&gt;
   &lt;soapenv:Header/&gt;
   &lt;soapenv:Body&gt;
      &lt;loan:LoanApplicationRequest&gt;
         &lt;loan:customerID&gt;CUST001&lt;/loan:customerID&gt;
         &lt;loan:loanAmount&gt;50000&lt;/loan:loanAmount&gt;
         &lt;loan:loanType&gt;Personal&lt;/loan:loanType&gt;
         &lt;loan:loanTermMonths&gt;36&lt;/loan:loanTermMonths&gt;
         &lt;loan:applicantName&gt;John Doe&lt;/loan:applicantName&gt;
         &lt;loan:contactEmail&gt;john.doe@example.com&lt;/loan:contactEmail&gt;
      &lt;/loan:LoanApplicationRequest&gt;
   &lt;/soapenv:Body&gt;
&lt;/soapenv:Envelope&gt;</code></pre>

<h1 id="flows">6. Flow Diagrams</h1>

<h2>6.1 Overall Migration Flow</h2>

<div class="diagram">
START
  â”‚
  â”œâ”€â–º [1] Scan Input Directory
  â”‚     â”‚
  â”‚     â”œâ”€â–º Find folders with .process, .xsd, .bwp files
  â”‚     â”‚
  â”‚     â””â”€â–º Result: List of BW process folders
  â”‚
  â”œâ”€â–º [2] Build Knowledge Base (RAG)
  â”‚     â”‚
  â”‚     â”œâ”€â–º Parse all .process files
  â”‚     â”‚
  â”‚     â”œâ”€â–º Index activities (SQL, JMS, HTTP, etc.)
  â”‚     â”‚
  â”‚     â””â”€â–º Create searchable index for pattern matching
  â”‚
  â”œâ”€â–º [3] Create Process Agents
  â”‚     â”‚
  â”‚     â””â”€â–º One ProcessAgent per BW folder
  â”‚
  â”œâ”€â–º [4] Execute Processing (Parallel/Sequential)
  â”‚     â”‚
  â”‚     â”œâ”€â–º For each ProcessAgent:
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€â–º Parse .process file
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€â–º Extract activities & schemas
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€â–º Detect service type (REST/SOAP)
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€â–º Generate REST project
  â”‚     â”‚     â”‚
  â”‚     â”‚     â””â”€â–º Generate SOAP project
  â”‚     â”‚
  â”‚     â””â”€â–º Collect all generated files
  â”‚
  â”œâ”€â–º [5] Validate Projects
  â”‚     â”‚
  â”‚     â”œâ”€â–º Check Maven availability
  â”‚     â”‚
  â”‚     â””â”€â–º Run mvn compile (optional)
  â”‚
  â”œâ”€â–º [6] Package Output
  â”‚     â”‚
  â”‚     â”œâ”€â–º Create src_rest.zip
  â”‚     â”‚
  â”‚     â””â”€â–º Create src_soap.zip
  â”‚
  â””â”€â–º [7] Generate Migration Report
        â”‚
        â””â”€â–º ai_migration_report.json

END
</div>

<h2>6.2 Process Agent Decision Flow</h2>

<div class="diagram">
Process Folder Received
        â”‚
        â–¼
   Parse .process File
        â”‚
        â”œâ”€â–º Extract Activities
        â”‚     â”œâ”€â–º JDBC operations
        â”‚     â”œâ”€â–º JMS send/receive
        â”‚     â”œâ”€â–º HTTP invocations
        â”‚     â””â”€â–º SOAP calls
        â”‚
        â”œâ”€â–º Extract Schemas (.xsd files)
        â”‚
        â””â”€â–º Analyze Service Type
              â”‚
              â”œâ”€â–º Contains HTTP activities? â”€â”€â–º REST Service
              â”‚
              â”œâ”€â–º Contains SOAP activities? â”€â”€â–º SOAP Service
              â”‚
              â””â”€â–º Default â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Both REST & SOAP
                    â”‚
                    â”œâ”€â–º Generate REST Project
                    â”‚     â””â”€â–º RestServiceAgent.generate()
                    â”‚
                    â””â”€â–º Generate SOAP Project
                          â””â”€â–º SoapServiceAgent.generate()
</div>

<h1 id="sequences">7. Sequence Diagrams</h1>

<h2>7.1 REST Service Request Flow</h2>

<div class="diagram">
Client â†’ Controller â†’ Service â†’ Repository â†’ Database
   â”‚         â”‚          â”‚           â”‚           â”‚
   â”‚ POST    â”‚          â”‚           â”‚           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚           â”‚           â”‚
   â”‚         â”‚ apply()  â”‚           â”‚           â”‚
   â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚           â”‚
   â”‚         â”‚          â”‚ save()    â”‚           â”‚
   â”‚         â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
   â”‚         â”‚          â”‚           â”‚ INSERT    â”‚
   â”‚         â”‚          â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚         â”‚          â”‚           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚         â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
   â”‚         â”‚          â”‚           â”‚           â”‚
   â”‚         â”‚          â”‚ creditCheck()         â”‚
   â”‚         â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚           â”‚
   â”‚         â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
   â”‚         â”‚          â”‚           â”‚           â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚           â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ response â”‚           â”‚           â”‚
   â”‚ 200 OK  â”‚          â”‚           â”‚           â”‚
</div>

<h1 id="outputs">8. Generated Outputs</h1>

<h2>8.1 REST Service Structure</h2>

<div class="success-box">
<pre><code>output/rest/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src/main/java/com/example/tibco_migration/
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ LoanApplicationController.java
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â””â”€â”€ LoanApplicationService.java
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ LoanRepository.java
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ LoanEntity.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ LoanApplicationRequest.java
â”‚       â””â”€â”€ LoanApplicationResponse.java
â””â”€â”€ src/main/resources/
    â”œâ”€â”€ application.yml
    â””â”€â”€ xsd/
        â”œâ”€â”€ loan_request.xsd
        â””â”€â”€ loan_response.xsd</code></pre>
</div>

<h2>8.2 SOAP Service Structure</h2>

<div class="success-box">
<pre><code>output/soap/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src/main/java/com/example/tibco_migration/
â”‚   â”œâ”€â”€ SoapServiceApplication.java
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ WebServiceConfig.java
â”‚   â”‚   â””â”€â”€ WebClientConfig.java
â”‚   â”œâ”€â”€ endpoint/
â”‚   â”‚   â””â”€â”€ LoanApplicationEndpoint.java
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â””â”€â”€ LoanApplicationService.java
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ LoanRepository.java
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ LoanEntity.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ LoanApplicationRequest.java (JAXB)
â”‚       â””â”€â”€ LoanApplicationResponse.java (JAXB)
â””â”€â”€ src/main/resources/
    â”œâ”€â”€ application.yml
    â””â”€â”€ xsd/
        â””â”€â”€ loan_request.xsd</code></pre>
</div>

<h1 id="troubleshooting">9. Troubleshooting</h1>

<h2>Common Issues and Solutions</h2>

<table>
    <tr>
        <th>Issue</th>
        <th>Symptom</th>
        <th>Solution</th>
    </tr>
    <tr>
        <td>AI Libraries Not Available</td>
        <td>Warning: "No module named 'numpy'"</td>
        <td>Normal operation. System uses fallback mode. Optional: <code>pip install numpy scikit-learn</code></td>
    </tr>
    <tr>
        <td>Maven Not Found</td>
        <td>"Maven executable not found"</td>
        <td>Install Maven or skip validation: <code>choco install maven</code></td>
    </tr>
    <tr>
        <td>Port Already in Use</td>
        <td>"Port 8080 is already in use"</td>
        <td>Change port in <code>application.yml</code>: <code>server.port: 8090</code></td>
    </tr>
    <tr>
        <td>JAXB Classes Not Generated</td>
        <td>"Cannot find generated JAXB classes"</td>
        <td>Run: <code>mvn clean compile</code></td>
    </tr>
    <tr>
        <td>WSDL Not Accessible</td>
        <td>"404 Not Found for WSDL"</td>
        <td>Verify XSD exists in <code>src/main/resources/xsd/</code></td>
    </tr>
</table>

<h2>Debug Mode</h2>

<div class="warning-box">
<p>Enable detailed logging in <code>application.yml</code>:</p>
<pre><code>logging:
  level:
    org.springframework.ws: DEBUG
    com.example.tibco_migration: DEBUG
    org.springframework.jms: DEBUG
    org.springframework.data.jpa: DEBUG</code></pre>
</div>

<h1 id="ai-enablement">10. Enabling AI-Powered Code Generation</h1>

<div class="feature-box">
<p><strong>Current Status:</strong> The framework uses <strong>template-based code generation</strong> (fast, deterministic, no API costs). You can optionally enable <strong>AI-powered generation</strong> for more intelligent, context-aware code.</p>
</div>

<h2>Current Architecture</h2>

<h3>Template-Based (Active)</h3>
<ul>
    <li>âœ… Uses predefined Python string templates</li>
    <li>âœ… Fast and reliable</li>
    <li>âœ… No external dependencies</li>
    <li>âœ… Generates consistent, predictable code</li>
    <li>âœ… No API costs</li>
</ul>

<h3>AI-Ready Design</h3>
<ul>
    <li>ğŸ¤– Multi-agent architecture ready for LLM integration</li>
    <li>ğŸ¤– RAG (Retrieval Augmented Generation) module already implemented</li>
    <li>ğŸ¤– Vector database (FAISS) support built-in</li>
    <li>ğŸ¤– Falls back to templates if AI libraries unavailable</li>
</ul>

<h2>How to Enable AI Features</h2>

<h3>Step 1: Install AI Dependencies</h3>

<p>Add to <code>requirements.txt</code>:</p>
<pre><code># AI/ML Dependencies (optional)
openai==1.3.0              # For LLM API calls
sentence-transformers      # For embeddings
faiss-cpu                  # Vector database (use faiss-gpu for GPU)
numpy                      # Mathematical operations</code></pre>

<p>Install:</p>
<pre><code>pip install -r requirements.txt</code></pre>

<div class="success-box">
<p><strong>Note:</strong> The <code>rag.py</code> module automatically detects these libraries and switches from fallback mode to AI mode!</p>
</div>

<h3>Step 2: Set Up OpenAI API Key</h3>

<pre><code># Windows PowerShell
$env:OPENAI_API_KEY="sk-your-api-key-here"

# Linux/Mac
export OPENAI_API_KEY="sk-your-api-key-here"</code></pre>

<h3>Step 3: Enable RAG (Vector Search)</h3>

<p>Once dependencies are installed, RAG works automatically:</p>
<pre><code>from generator.ai.rag import ProcessKnowledgeBase

kb = ProcessKnowledgeBase()
kb.index_process_activities("input/LoanApplication.process")
similar = kb.query_similar_activities("SQL activity with parameterized query", k=5)</code></pre>

<h2>AI vs Template Comparison</h2>

<table>
    <tr>
        <th>Feature</th>
        <th>Template-Based</th>
        <th>AI-Powered</th>
    </tr>
    <tr>
        <td>Speed</td>
        <td>âš¡ Very Fast (&lt;1s)</td>
        <td>ğŸŒ Slower (5-10s per service)</td>
    </tr>
    <tr>
        <td>Cost</td>
        <td>ğŸ’° Free</td>
        <td>ğŸ’µ ~$0.01-0.10 per service</td>
    </tr>
    <tr>
        <td>Consistency</td>
        <td>âœ… Identical output</td>
        <td>âš ï¸ Varies slightly</td>
    </tr>
    <tr>
        <td>Intelligence</td>
        <td>ğŸ“‹ Fixed patterns</td>
        <td>ğŸ§  Context-aware</td>
    </tr>
    <tr>
        <td>Dependencies</td>
        <td>âœ… Python only</td>
        <td>ğŸ“¦ OpenAI API, ML libraries</td>
    </tr>
    <tr>
        <td>Customization</td>
        <td>ğŸ“ Edit templates</td>
        <td>ğŸ’¬ Prompt engineering</td>
    </tr>
    <tr>
        <td>Best For</td>
        <td>Standard migrations</td>
        <td>Complex, unique patterns</td>
    </tr>
</table>

<h2>When to Use AI</h2>

<div class="success-box">
<h3>âœ… Use AI-powered generation when:</h3>
<ul>
    <li>TIBCO processes have complex, unique business logic</li>
    <li>You need intelligent mapping of custom activities</li>
    <li>Processes use uncommon patterns</li>
    <li>You want to leverage historical migration knowledge</li>
</ul>
</div>

<div class="warning-box">
<h3>âŒ Use template-based generation when:</h3>
<ul>
    <li>Processes follow standard patterns</li>
    <li>Speed is critical</li>
    <li>You want predictable, consistent output</li>
    <li>No OpenAI API access or budget constraints</li>
</ul>
</div>

<h2>RAG Vector Database Details</h2>

<table>
    <tr>
        <th>Aspect</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Technology</td>
        <td>FAISS (Facebook AI Similarity Search)</td>
    </tr>
    <tr>
        <td>Type</td>
        <td>In-memory vector database</td>
    </tr>
    <tr>
        <td>Dimensions</td>
        <td>384 (model: all-MiniLM-L6-v2)</td>
    </tr>
    <tr>
        <td>Purpose</td>
        <td>Store TIBCO activity embeddings for similarity search</td>
    </tr>
    <tr>
        <td>Use Case</td>
        <td>Find similar activities across multiple BW processes</td>
    </tr>
</table>

<h3>How RAG Works:</h3>
<ol>
    <li>Parse TIBCO <code>.process</code> files and extract activities</li>
    <li>Convert activity metadata to text representations</li>
    <li>Generate embeddings using sentence-transformers</li>
    <li>Store in FAISS index for fast similarity search</li>
    <li>Query during code generation to find similar patterns</li>
</ol>

<h2>Cost Estimation (AI Mode)</h2>

<table>
    <tr>
        <th>Item</th>
        <th>Cost</th>
    </tr>
    <tr>
        <td>OpenAI GPT-4 Input</td>
        <td>~$0.03 per 1K tokens</td>
    </tr>
    <tr>
        <td>OpenAI GPT-4 Output</td>
        <td>~$0.06 per 1K tokens</td>
    </tr>
    <tr>
        <td>Average per service</td>
        <td><strong>~$0.12</strong></td>
    </tr>
    <tr>
        <td>For 10 BW processes</td>
        <td>~$1.20</td>
    </tr>
    <tr>
        <td>For 100 BW processes</td>
        <td>~$12.00</td>
    </tr>
    <tr>
        <td>Template mode</td>
        <td><strong>$0</strong> (no API calls)</td>
    </tr>
</table>

<h2>Migration Path: Template â†’ AI</h2>

<div class="feature-box">
<p><strong>You don't need to rewrite everything!</strong> The framework supports <strong>hybrid mode</strong>:</p>
<ol>
    <li><strong>Phase 1:</strong> Use templates for standard services (90% of processes)</li>
    <li><strong>Phase 2:</strong> Enable AI only for complex processes with <code>--use-ai</code> flag</li>
    <li><strong>Phase 3:</strong> Gradually enhance with LLM where templates fall short</li>
</ol>
<p><strong>No breaking changes</strong> - templates remain as fallback!</p>
</div>

<h1 id="hexagonal">11. Hexagonal Architecture Support</h1>

<div class="feature-box">
<p>The framework now supports <strong>two architectural patterns</strong> for generating Spring Boot services:</p>
<ol>
    <li><strong>Layered Architecture</strong> (Default) - Traditional controller â†’ service â†’ repository structure</li>
    <li><strong>Hexagonal Architecture</strong> (New) - Ports & Adapters pattern with domain-driven design</li>
</ol>
</div>

<h2>11.1 Architecture Comparison</h2>

<table>
    <tr>
        <th>Aspect</th>
        <th>Layered Architecture</th>
        <th>Hexagonal Architecture</th>
    </tr>
    <tr>
        <td><strong>Structure</strong></td>
        <td>Controller â†’ Service â†’ Repository</td>
        <td>Domain (Ports) â† Adapters</td>
    </tr>
    <tr>
        <td><strong>Dependencies</strong></td>
        <td>Top-down (Controller depends on Service)</td>
        <td>Inward (Adapters depend on Domain)</td>
    </tr>
    <tr>
        <td><strong>Domain Purity</strong></td>
        <td>Domain mixed with framework code</td>
        <td>Domain has ZERO framework dependencies</td>
    </tr>
    <tr>
        <td><strong>Testability</strong></td>
        <td>Requires mocking Spring components</td>
        <td>Pure unit tests without Spring</td>
    </tr>
    <tr>
        <td><strong>Technology Coupling</strong></td>
        <td>Tight coupling to Spring</td>
        <td>Loose coupling via interfaces</td>
    </tr>
    <tr>
        <td><strong>Best For</strong></td>
        <td>Standard CRUD services</td>
        <td>Complex business logic, DDD</td>
    </tr>
    <tr>
        <td><strong>Generated Projects</strong></td>
        <td>Separate REST and SOAP projects</td>
        <td>Single project with multiple adapters</td>
    </tr>
</table>

<h2>11.2 Hexagonal Architecture Overview</h2>

<div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Hexagonal Architecture (Ports & Adapters)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    REST Adapter      â”‚
                â”‚   (Controller)       â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   SOAP Adapter       â”‚
                â”‚   (Endpoint)         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                     â”‚                     â”‚
     â”‚        INPUT PORTS (Interfaces)           â”‚
     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
     â”‚     â”‚   LoanApplicationUseCase      â”‚     â”‚
     â”‚     â”‚   (Interface)                 â”‚     â”‚
     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
     â”‚                     â”‚                     â”‚
     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
     â”‚        â”‚    DOMAIN LAYER         â”‚        â”‚
     â”‚        â”‚  (Pure Business Logic)  â”‚        â”‚
     â”‚        â”‚                         â”‚        â”‚
     â”‚        â”‚ â€¢ LoanApplication       â”‚        â”‚
     â”‚        â”‚ â€¢ ApplicantInfo         â”‚        â”‚
     â”‚        â”‚ â€¢ CreditScore           â”‚        â”‚
     â”‚        â”‚ â€¢ LoanStatus            â”‚        â”‚
     â”‚        â”‚                         â”‚        â”‚
     â”‚        â”‚ LoanApplicationService  â”‚        â”‚
     â”‚        â”‚ (implements UseCase)    â”‚        â”‚
     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚                     â”‚                     â”‚
     â”‚        OUTPUT PORTS (Interfaces)          â”‚
     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
     â”‚     â”‚ â€¢ LoanRepository              â”‚     â”‚
     â”‚     â”‚ â€¢ CreditScoreGateway          â”‚     â”‚
     â”‚     â”‚ â€¢ NotificationGateway         â”‚     â”‚
     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
     â”‚                     â”‚                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                     â”‚                     â”‚
     â”‚        OUTPUT ADAPTERS                    â”‚
     â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   JPA    â”‚     â”‚  HTTP Gateway   â”‚     â”‚     JMS     â”‚
â”‚ Adapter  â”‚     â”‚    (WebClient)  â”‚     â”‚   Adapter   â”‚
â”‚(Database)â”‚     â”‚(External APIs)  â”‚     â”‚(Messaging)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div>

<h3>Key Principles</h3>

<div class="success-box">
<p><strong>1. Domain Independence:</strong></p>
<ul>
    <li>Domain models have NO Spring annotations</li>
    <li>Pure Java POJOs representing business concepts</li>
    <li>No framework dependencies (@Entity, @Component, etc.)</li>
</ul>

<p><strong>2. Dependency Inversion:</strong></p>
<ul>
    <li>Domain defines interfaces (ports)</li>
    <li>Adapters implement those interfaces</li>
    <li>Dependencies point INWARD toward domain</li>
</ul>

<p><strong>3. Adapter Flexibility:</strong></p>
<ul>
    <li>Multiple input adapters (REST, SOAP, CLI) can use same domain</li>
    <li>Output adapters (JPA, MongoDB, external APIs) are swappable</li>
    <li>Change technology without touching domain logic</li>
</ul>
</div>

<h2>11.3 Usage Examples</h2>

<h3>Generate Hexagonal Architecture (Combined REST + SOAP)</h3>
<pre><code>python -m generator.ai.run \
  --input-dir input_artifacts \
  --output-dir output \
  --architecture hexagonal \
  --service-type combined
</code></pre>

<p><strong>Output:</strong></p>
<ul>
    <li>Single Spring Boot project with both REST and SOAP adapters</li>
    <li>Shared domain logic</li>
    <li>Both adapters call same use case</li>
</ul>

<h3>Generate Hexagonal Architecture (REST Only)</h3>
<pre><code>python -m generator.ai.run \
  --input-dir input_artifacts \
  --output-dir output \
  --architecture hexagonal \
  --service-type rest
</code></pre>

<p><strong>Output:</strong></p>
<ul>
    <li>Only REST adapter included in project</li>
    <li>Lighter pom.xml (no Spring-WS dependencies)</li>
    <li>Still follows hexagonal pattern</li>
</ul>

<h3>Generate Traditional Layered Architecture (Default)</h3>
<pre><code>python -m generator.ai.run \
  --input-dir input_artifacts \
  --output-dir output
  # --architecture layered (default, can be omitted)
</code></pre>

<p><strong>Output:</strong></p>
<ul>
    <li>Separate REST and SOAP projects</li>
    <li>Traditional structure (backward compatible)</li>
</ul>

<h2>11.4 Code Examples</h2>

<h3>Domain Model (Pure Java)</h3>
<pre><code>// domain/model/LoanApplication.java
package com.example.tibco_migration.domain.model;

// NO Spring annotations! Pure business entity
public class LoanApplication {
    private String loanID;
    private String customerID;
    private double loanAmount;
    private LoanStatus status;
    
    // Business methods
    public void approve(double amount) {
        this.status = LoanStatus.APPROVED;
        this.loanAmount = amount;
    }
    
    public boolean requiresCreditCheck() {
        return loanAmount > 10000;
    }
}
</code></pre>

<h3>Input Port (Use Case Interface)</h3>
<pre><code>// domain/port/in/LoanApplicationUseCase.java
package com.example.tibco_migration.domain.port.in;

// Domain-defined interface (NO Spring!)
public interface LoanApplicationUseCase {
    LoanApplication applyForLoan(LoanApplication application);
    LoanApplication getLoanStatus(String loanID);
}
</code></pre>

<h3>Domain Service (Business Logic)</h3>
<pre><code>// domain/service/LoanApplicationService.java
package com.example.tibco_migration.domain.service;

// Pure business logic - NO @Service annotation!
public class LoanApplicationService implements LoanApplicationUseCase {
    private final LoanRepository loanRepository;
    private final CreditScoreGateway creditScoreGateway;
    
    public LoanApplicationService(
        LoanRepository loanRepository,
        CreditScoreGateway creditScoreGateway
    ) {
        this.loanRepository = loanRepository;
        this.creditScoreGateway = creditScoreGateway;
    }
    
    @Override
    public LoanApplication applyForLoan(LoanApplication application) {
        if (application.requiresCreditCheck()) {
            CreditScore score = creditScoreGateway.checkCredit(
                application.getCustomerID()
            );
            
            if (score.getScore() > 700) {
                application.approve(application.getLoanAmount());
            }
        }
        
        return loanRepository.save(application);
    }
}
</code></pre>

<h3>REST Adapter (Input)</h3>
<pre><code>// adapter/in/rest/controller/LoanController.java
package com.example.tibco_migration.adapter.in.rest.controller;

import org.springframework.web.bind.annotation.*;

@RestController  // Spring annotation in ADAPTER only
@RequestMapping("/api/loans")
public class LoanController {
    private final LoanApplicationUseCase loanUseCase;  // Depends on PORT
    
    @PostMapping("/apply")
    public LoanResponseDto apply(@RequestBody LoanRequestDto dto) {
        // Convert DTO â†’ Domain
        LoanApplication domain = mapper.toDomain(dto);
        
        // Call use case (domain logic)
        LoanApplication result = loanUseCase.applyForLoan(domain);
        
        // Convert Domain â†’ DTO
        return mapper.toDto(result);
    }
}
</code></pre>

<h2>11.5 Benefits</h2>

<table>
    <tr>
        <th>Benefit</th>
        <th>Description</th>
        <th>Example</th>
    </tr>
    <tr>
        <td><strong>Testability</strong></td>
        <td>Test domain logic without Spring</td>
        <td>No @SpringBootTest needed - pure JUnit</td>
    </tr>
    <tr>
        <td><strong>Technology Independence</strong></td>
        <td>Swap frameworks without changing business logic</td>
        <td>Change from JPA to MongoDB - only adapter changes</td>
    </tr>
    <tr>
        <td><strong>Domain Focus</strong></td>
        <td>Business rules in pure Java</td>
        <td>Domain experts can read code without framework knowledge</td>
    </tr>
    <tr>
        <td><strong>Multiple Interfaces</strong></td>
        <td>Same domain, multiple adapters</td>
        <td>REST + SOAP + GraphQL using same business logic</td>
    </tr>
    <tr>
        <td><strong>Clear Boundaries</strong></td>
        <td>Explicit separation of concerns</td>
        <td>Ports define contracts between layers</td>
    </tr>
</table>

<h2>11.6 When to Use Each Architecture</h2>

<h3>âœ… Use Layered Architecture When:</h3>
<div class="success-box">
<ul>
    <li>Simple CRUD operations</li>
    <li>Standard REST/SOAP services</li>
    <li>Team familiar with Spring Boot conventions</li>
    <li>Quick prototypes</li>
    <li>Small services with minimal business logic</li>
</ul>
</div>

<h3>âœ… Use Hexagonal Architecture When:</h3>
<div class="feature-box">
<ul>
    <li>Complex business logic (DDD approach)</li>
    <li>Need to support multiple protocols (REST + SOAP + CLI)</li>
    <li>High testability requirements</li>
    <li>Technology might change (database, messaging, etc.)</li>
    <li>Long-term maintainability is critical</li>
    <li>Domain-driven design principles</li>
    <li>Team experienced with ports & adapters pattern</li>
</ul>
</div>

<h2>11.7 Generated Structure (Hexagonal)</h2>

<div class="diagram">
output/hexagonal/
â”‚
â”œâ”€â”€ pom.xml                          # Conditional dependencies
â”œâ”€â”€ src/main/java/com/example/tibco_migration/
â”‚   â”œâ”€â”€ HexagonalServiceApplication.java     # @SpringBootApplication
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                              # PURE DOMAIN
â”‚   â”‚   â”œâ”€â”€ model/                           # No framework deps
â”‚   â”‚   â”‚   â”œâ”€â”€ LoanApplication.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ApplicantInfo.java
â”‚   â”‚   â”‚   â””â”€â”€ LoanStatus.java
â”‚   â”‚   â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”œâ”€â”€ in/                          # INPUT PORTS
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LoanApplicationUseCase.java
â”‚   â”‚   â”‚   â””â”€â”€ out/                         # OUTPUT PORTS
â”‚   â”‚   â”‚       â”œâ”€â”€ LoanRepository.java
â”‚   â”‚   â”‚       â”œâ”€â”€ CreditScoreGateway.java
â”‚   â”‚   â”‚       â””â”€â”€ NotificationGateway.java
â”‚   â”‚   â””â”€â”€ service/
â”‚   â”‚       â””â”€â”€ LoanApplicationService.java  # Business logic
â”‚   â”‚
â”‚   â”œâ”€â”€ adapter/                             # ADAPTERS
â”‚   â”‚   â”œâ”€â”€ in/                              # INPUT ADAPTERS
â”‚   â”‚   â”‚   â”œâ”€â”€ rest/                        # REST Adapter
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mapper/
â”‚   â”‚   â”‚   â””â”€â”€ soap/                        # SOAP Adapter
â”‚   â”‚   â”‚       â”œâ”€â”€ endpoint/
â”‚   â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚   â”‚       â””â”€â”€ config/
â”‚   â”‚   â””â”€â”€ out/                             # OUTPUT ADAPTERS
â”‚   â”‚       â”œâ”€â”€ persistence/                 # JPA Adapter
â”‚   â”‚       â”œâ”€â”€ http/                        # HTTP Gateway
â”‚   â”‚       â””â”€â”€ jms/                         # JMS Adapter
â”‚   â””â”€â”€ config/
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml
</div>

<h2>11.8 Build and Run Hexagonal Service</h2>

<pre><code># Build
cd output/hexagonal
mvn clean package

# Run
java -jar target/hexagonal-loan-service-0.1.0.jar
</code></pre>

<p><strong>Access:</strong></p>
<ul>
    <li>REST API: <code>http://localhost:8080/api/loans/apply</code></li>
    <li>SOAP WSDL: <code>http://localhost:8080/ws/loanApplication.wsdl</code> (if SOAP enabled)</li>
</ul>

<h1>Quick Reference</h1>

<h2>Command Summary</h2>

<table>
    <tr>
        <th>Action</th>
        <th>Command</th>
    </tr>
    <tr>
        <td>Run Migration</td>
        <td><code>python -m generator.ai.run --input-dir input_artifacts --output-dir output</code></td>
    </tr>
    <tr>
        <td>Build REST Service</td>
        <td><code>cd output/rest && mvn clean package</code></td>
    </tr>
    <tr>
        <td>Build SOAP Service</td>
        <td><code>cd output/soap && mvn clean package</code></td>
    </tr>
    <tr>
        <td>Run REST Service</td>
        <td><code>mvn spring-boot:run</code> (in rest folder)</td>
    </tr>
    <tr>
        <td>Run SOAP Service</td>
        <td><code>mvn spring-boot:run</code> (in soap folder)</td>
    </tr>
</table>

<h2>Service URLs</h2>

<table>
    <tr>
        <th>Service</th>
        <th>URL</th>
    </tr>
    <tr>
        <td>REST API</td>
        <td><code>http://localhost:8080</code></td>
    </tr>
    <tr>
        <td>SOAP WSDL</td>
        <td><code>http://localhost:8081/ws/loanApplication.wsdl</code></td>
    </tr>
    <tr>
        <td>H2 Console (REST)</td>
        <td><code>http://localhost:8080/h2-console</code></td>
    </tr>
    <tr>
        <td>H2 Console (SOAP)</td>
        <td><code>http://localhost:8081/h2-console</code></td>
    </tr>
</table>

<footer style="margin-top: 50px; padding-top: 20px; border-top: 2px solid #ddd; text-align: center; color: #666;">
    <p><strong>Document Version:</strong> 1.0</p>
    <p><strong>Last Updated:</strong> October 30, 2025</p>
    <p><strong>Project:</strong> TIBCO BusinessWorks to Spring Boot Migration Framework</p>
</footer>

</body>
</html>
